(this["webpackJsonpevil-auth"]=this["webpackJsonpevil-auth"]||[]).push([[0],{113:function(e,t,a){e.exports={row:"FormRow_row__2lJXz"}},127:function(e,t,a){},232:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(55),s=a.n(c),i=(a(127),a(8)),o=a(9),l=a(16),b=a(56),u=function(e,t){return Object(r.useMemo)((function(){return Object(b.a)(e())}),t)},j=a(78),d=a.n(j),O=a(2),p=["className"],f=["className"],x=function(e){var t=e.className,a=Object(l.a)(e,p),r=u((function(){return[d.a.card,t]}),[t]);return Object(O.jsx)("div",Object(o.a)({className:r},a))},m=function(e){var t=e.className,a=Object(l.a)(e,f),r=u((function(){return[d.a.cardBody,t]}),[t]);return Object(O.jsx)("div",Object(o.a)({className:r},a))},h=a(15),v=a.n(h),_=a(17),g=a(19),w=a(18),C=a(32),y=a(25),N=a.n(y),k=a(29),S=["label","onChange","className","error"],T=["label"],I=function(e){var t=Object.assign({},e);return Object(O.jsx)("div",Object(o.a)(Object(o.a)({},t),{},{className:N.a.errorMessage}))},B=function(e){var t=e.label,a=e.onChange,n=e.className,c=e.error,s=Object(l.a)(e,S),b=Object(r.useState)(!!s.value),j=Object(i.a)(b,2),d=j[0],p=j[1],f=u((function(){var e;return[N.a.inputRoot,n,(e={},Object(C.a)(e,N.a.filled,d),Object(C.a)(e,N.a.hasError,!!c),e)]}),[d,c]),x=Object(r.useCallback)((function(e){p(!!e.target.value),a(e)}),[p,a]),m=Object(k.useTransition)(c,{keys:function(e){return e?"err":"none"},from:{opacity:0,marginTop:"-27px"},enter:{opacity:1,marginTop:"0px"},leave:{opacity:0,marginTop:"-27px"},config:Object(o.a)(Object(o.a)({},k.config.molasses),{},{duration:50})});return Object(O.jsxs)("div",{className:f,children:[Object(O.jsxs)("div",{className:N.a.wrapper,children:[Object(O.jsx)("input",Object(o.a)({onChange:x,className:N.a.input},s)),Object(O.jsx)("label",{className:N.a.label,children:t})]}),m((function(e,t){return t&&Object(O.jsx)(k.animated.div,{style:e,className:N.a.errorContainer,children:Object(O.jsx)(I,{children:t})})}))]})};B.defaultProps={onChange:function(){}};var E=function(e){var t=e.label,a=Object(l.a)(e,T),r=Object(g.c)(a),n=Object(i.a)(r,2),c=n[0],s=n[1];return Object(O.jsx)(B,Object(o.a)(Object(o.a)({label:t,error:s.touched&&s.error},a),c))},R=a(61),L=a.n(R),M=["className","block","loading"],P=function(e){var t=e.className,a=e.block,r=e.loading,n=Object(l.a)(e,M),c=u((function(){return[L.a.btn,a&&L.a.block,r&&L.a.loading,t]}),[t,r,a]);return Object(O.jsx)("button",Object(o.a)(Object(o.a)({},n),{},{className:c}))},F=a(113),q=a.n(F),J=["className"],D=function(e){var t=e.className,a=Object(l.a)(e,J),r=u((function(){return[q.a.row,t]}),[t]);return Object(O.jsx)("div",Object(o.a)({className:r},a))},U=a(3),A=a(6),G=a(7),H=a(34),V=function(e){Object(A.a)(a,e);var t=Object(G.a)(a);function a(e,r,n){var c;return Object(U.a)(this,a),(c=t.call(this,"".concat(e," ").concat(r))).response=n,c}return a}(Object(H.a)(Error)),z={baseUrl:"/api",get:function(e){var t=this;return Object(_.a)(v.a.mark((function a(){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(t.baseUrl+e);case 2:return r=a.sent,a.next=5,r.json();case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}),a)})))()},post:function(e,t){var a=this;return Object(_.a)(v.a.mark((function r(){var n,c;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t instanceof FormData||(t=JSON.stringify(t)),r.next=3,fetch(a.baseUrl+e,{method:"post",body:t});case 3:if((n=r.sent).ok){r.next=15;break}if(!n.headers.get("content-type").includes("application/json")){r.next=11;break}return r.next=8,n.json();case 8:c=r.sent,r.next=14;break;case 11:return r.next=13,n.text();case 13:c=r.sent;case 14:throw new V(n.status,n.statusText,c);case 15:return r.next=17,n.json();case 17:return r.abrupt("return",r.sent);case 18:case"end":return r.stop()}}),r)})))()}},W=function(){},X=function(e){localStorage.setItem("user",JSON.stringify(e))},Y=function(){return JSON.parse(localStorage.getItem("user"))},Z=function(){localStorage.removeItem("user")},K=a(43),Q=a.n(K),$=["label","error","className"],ee=["label"],te=Object(r.memo)((function(){return Object(O.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(O.jsx)("path",{d:"M4.71996 8.00006C4.5323 7.8313 4.28778 7.73973 4.03543 7.74373C3.78308 7.74773 3.54158 7.84699 3.35936 8.02162C3.17715 8.19624 3.0677 8.4333 3.05297 8.68525C3.03825 8.9372 3.11933 9.1854 3.27996 9.38006L5.49996 11.7101C5.5929 11.8076 5.70459 11.8853 5.82832 11.9386C5.95204 11.9918 6.08525 12.0195 6.21996 12.0201C6.35395 12.0208 6.48673 11.9947 6.61041 11.9432C6.7341 11.8916 6.84616 11.8158 6.93996 11.7201L13.72 4.72006C13.8119 4.62551 13.8843 4.51378 13.933 4.39124C13.9818 4.26871 14.0059 4.13778 14.004 4.00592C14.0022 3.87406 13.9744 3.74386 13.9222 3.62275C13.87 3.50163 13.7945 3.39199 13.7 3.30006C13.6054 3.20814 13.4937 3.13573 13.3711 3.08699C13.2486 3.03824 13.1177 3.01411 12.9858 3.01597C12.854 3.01783 12.7238 3.04564 12.6026 3.09781C12.4815 3.14999 12.3719 3.22551 12.28 3.32006L6.22996 9.58006L4.71996 8.00006Z"})})}));te.displayName="CheckIcon";var ae=function(e){var t=e.label,a=e.error,r=e.className,n=Object(l.a)(e,$),c=u((function(){return[Q.a.root,r,!!a&&Q.a.error]}),[r,a]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("label",{className:c,children:[Object(O.jsx)("span",{children:Object(O.jsxs)("span",{className:Q.a.box,children:[Object(O.jsx)("input",Object(o.a)({type:"checkbox"},n)),Object(O.jsx)("span",{children:Object(O.jsx)("span",{children:Object(O.jsx)(te,{})})})]})}),Object(O.jsx)("span",{className:Q.a.label,children:t})]}),!!a&&Object(O.jsx)(I,{style:{marginTop:"6px"},children:a})]})},re=function(e){var t=e.label,a=Object(l.a)(e,ee),r=Object(g.c)(Object(o.a)(Object(o.a)({},a),{},{type:"checkbox"})),n=Object(i.a)(r,2),c=n[0],s=n[1];return Object(O.jsx)(ae,Object(o.a)(Object(o.a)({label:t,error:s.touched&&s.error},a),c))},ne=["remember"],ce=w.b({email:w.c().email().required(),password:w.c().required(),remember:w.a()}),se=function(e){var t=e.onSuccess,a=Object(r.useCallback)(function(){var e=Object(_.a)(v.a.mark((function e(a,r){var n,c,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.remember,c=Object(l.a)(a,ne),e.prev=1,e.next=4,z.post("/login",c);case 4:s=e.sent,t(s),n&&X(s.user),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r.setErrors(e.t0.response.errors);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}(),[t]);return Object(O.jsx)(g.b,{validateOnMount:!0,validationSchema:ce,initialValues:{email:"",password:"",remember:!1},onSubmit:a,children:function(e){var t=e.isSubmitting;return Object(O.jsxs)(g.a,{children:[Object(O.jsx)(D,{children:Object(O.jsx)(E,{label:"Email",name:"email"})}),Object(O.jsx)(D,{children:Object(O.jsx)(E,{type:"password",label:"Password",name:"password"})}),Object(O.jsx)(D,{children:Object(O.jsx)(re,{name:"remember",label:"Remember me"})}),Object(O.jsx)(D,{children:Object(O.jsx)(P,{block:!0,loading:t,type:"submit",children:"SignIn"})})]})}})};se.defaultProps={onSuccess:W};var ie=se,oe=a(44),le=a.n(oe),be=["children","defaultTab","tab"],ue=["children"],je=["className"],de=Object(r.createContext)({}),Oe=function(e){var t=e.children,a=e.defaultTab,n=e.tab,c=Object(l.a)(e,be),s=Object(r.useState)(n||a||0),b=Object(i.a)(s,2),u=b[0],j=b[1];Object(r.useEffect)((function(){n&&j(n)}),[n]);var d=Object(r.useCallback)((function(e){j(e)}),[j]);return Object(O.jsx)(de.Provider,{value:{setTab:d,activeTab:u},children:Object(O.jsx)("div",Object(o.a)(Object(o.a)({},c),{},{children:t}))})};Oe.defaultProps={defaultTab:0};var pe=Oe,fe=function(e){var t=e.children,a=Object(l.a)(e,ue),n=Object(r.useContext)(de),c=Object(r.useRef)([]),s=Object(r.useState)({left:0,width:0}),u=Object(i.a)(s,2),j=u[0],d=u[1],p=r.Children.map(t,(function(e,t){var a={ref:function(e){return c.current.push(e)},className:Object(b.a)([e.props.className,Object(C.a)({},le.a.tabActive,t===n.activeTab)])};return e.props.onClick?a.onClick=e.props.onClick:a.onClick=function(){n.setTab(t)},Object(r.cloneElement)(e,a)}));return Object(r.useEffect)((function(){var e=c.current[n.activeTab];e&&d({left:e.offsetLeft+"px",width:e.offsetWidth+"px"})}),[n.activeTab]),Object(O.jsxs)("div",Object(o.a)(Object(o.a)({},a),{},{className:le.a.tabsList,children:[p," ",Object(O.jsx)("div",{style:j,className:le.a.activeIndicator})]}))},xe=Object(r.forwardRef)((function(e,t){var a=e.className,r=Object(l.a)(e,je),n=u((function(){return[le.a.tab,a]}),[a]);return Object(O.jsx)("div",Object(o.a)({ref:t,className:n},r))}));xe.displayName="Tab";var me=function(e){return(0,e.children)(Object(r.useContext)(de).activeTab)},he=w.b({name:w.c().required(),email:w.c().email().required(),password:w.c().required().min(6),passwordRepeat:w.c().required().test("match","Passwords do not match",(function(e,t){var a=t.parent;return a.password===a.passwordRepeat})),accept:w.a().required().oneOf([!0],"You should accept terms")}),ve=function(e){var t=e.onSuccess,a=Object(r.useCallback)(function(){var e=Object(_.a)(v.a.mark((function e(a,r){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.post("/register",a);case 3:n=e.sent,t(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.setErrors(e.t0.response.errors);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),[]);return Object(O.jsx)(g.b,{validateOnMount:!0,validationSchema:he,initialValues:{name:"",email:"",password:"",passwordRepeat:"",accept:!1},onSubmit:a,children:function(e){var t=e.isSubmitting;e.isValid;return Object(O.jsxs)(g.a,{children:[Object(O.jsx)(D,{children:Object(O.jsx)(E,{name:"name",label:"Full name"})}),Object(O.jsx)(D,{children:Object(O.jsx)(E,{name:"email",label:"Email"})}),Object(O.jsx)(D,{children:Object(O.jsx)(E,{type:"password",name:"password",label:"Password"})}),Object(O.jsx)(D,{children:Object(O.jsx)(E,{type:"password",name:"passwordRepeat",label:"Repeat password"})}),Object(O.jsx)(D,{children:Object(O.jsx)(re,{name:"accept",label:Object(O.jsxs)(O.Fragment,{children:["I accept the terms of the offer of the ",Object(O.jsx)("a",{href:"#",children:"privacy policy"})]})})}),Object(O.jsx)(D,{children:Object(O.jsx)(P,{loading:t,block:!0,type:"submit",children:"Register"})})]})}})};ve.defaultProps={onSuccess:W};var _e=ve,ge=function(e){var t=e.onSuccess;return Object(O.jsx)("div",{children:Object(O.jsx)("div",{style:{minWidth:"474px"},children:Object(O.jsxs)(x,{children:[Object(O.jsx)(m,{children:Object(O.jsx)("h4",{style:{margin:0},children:"Profile"})}),Object(O.jsxs)(pe,{children:[Object(O.jsxs)(fe,{style:{padding:"0 32px"},children:[Object(O.jsx)(xe,{children:"Sign In"}),Object(O.jsx)(xe,{children:"Registration"})]}),Object(O.jsx)(me,{children:function(e){var a;return a=0===e?Object(O.jsx)(ie,{onSuccess:t}):Object(O.jsx)(_e,{onSuccess:t}),Object(O.jsx)(m,{children:a})}})]})]})})})};ge.defaultProps={onSuccess:W};var we=ge,Ce=function(e){var t=e.user,a=e.onLogOut,n=Object(r.useCallback)((function(){a()}),[a]);return Object(O.jsx)("div",{className:"centredContainer",children:Object(O.jsx)(x,{children:Object(O.jsx)(m,{children:Object(O.jsxs)("h4",{style:{margin:0},children:[t.name," ",Object(O.jsx)(P,{onClick:n,children:"LogOut"})]})})})})};var ye=function(){var e=Object(r.useState)(Y()||null),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(k.useTransition)(a,{from:{opacity:0,scale:1.5,filter:"blur(10px)"},enter:{opacity:1,scale:1,filter:"blur(0px)"},leave:{opacity:0,scale:1.5,filter:"blur(10px)"},config:k.config.stiff}),s=Object(r.useCallback)((function(e){n(e.user)}),[n]),o=Object(r.useCallback)((function(){n(null),Z()}),[n]);return c((function(e,t){return t?Object(O.jsx)(Ce,{user:t,onLogOut:o}):Object(O.jsx)(k.animated.div,{className:"centredContainer auth",style:e,children:Object(O.jsx)(we,{onSuccess:s})})}))},Ne=a(47);Object(Ne.c)({models:{user:Ne.a},seeds:function(e){e.create("user",{name:"John Doe",password:"12345678",email:"john@doe.com"})},routes:function(){this.passthrough(),this.namespace="api",this.post("/login",(function(e,t){var a=JSON.parse(t.requestBody),r=e.users.findBy(a);return r||new Ne.b(400,{},{errors:{email:"User not found"}})}),{timing:1e3}),this.post("/register",(function(e,t){var a=JSON.parse(t.requestBody);return e.users.findBy({email:a.email})?new Ne.b(400,{},{errors:{email:"Email already registered"}}):e.users.create(a)}),{timing:1e3})}}),s.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(ye,{})}),document.getElementById("root"))},25:function(e,t,a){e.exports={inputRoot:"Input_inputRoot__3KcMO",textFonts:"Input_textFonts__1Dexb",wrapper:"Input_wrapper__3hyG9",label:"Input_label__G01Ic Input_textFonts__1Dexb",input:"Input_input__1lDET Input_textFonts__1Dexb",filled:"Input_filled__2pvpl",errorMessage:"Input_errorMessage__QZfEx",hasError:"Input_hasError__2YXH3",errorContainer:"Input_errorContainer__1IAo6"}},43:function(e,t,a){e.exports={root:"CheckBox_root__4s13y",box:"CheckBox_box__OhB7w",error:"CheckBox_error__2loHC",label:"CheckBox_label__160_E"}},44:function(e,t,a){e.exports={tabs:"Tabs_tabs__3SHFx",tabsList:"Tabs_tabsList__Ef1-B",tab:"Tabs_tab__2pOMM",tabActive:"Tabs_tabActive__193Ut",activeIndicator:"Tabs_activeIndicator__oxkE-"}},61:function(e,t,a){e.exports={btn:"Button_btn__mPgD0",block:"Button_block__2cw3z",loading:"Button_loading__278rN"}},78:function(e,t,a){e.exports={card:"Card_card__9TGoO",cardBody:"Card_cardBody__RUg27"}}},[[232,1,2]]]);
//# sourceMappingURL=main.31a0ef33.chunk.js.map